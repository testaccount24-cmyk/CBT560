//BC0THORD JOB (1152002-9800039,,TMVS01-UR-XXXX),'DTHORNTON',CLASS=V,
//   MSGCLASS=Y,NOTIFY=BC0THOR,REGION=4M
//JESOUT OUTPUT GROUPID=02A,DEFAULT=YES,JESDS=ALL,
//   PAGEDEF=GRYBIG,FORMDEF=GRYBIG
//*******************************************************************
//*                 BC0THOR.PDS.JCL(SMFSTEPT)                       *
//*1. SCRATCH DATASETS PRODUCED DURING THE RUN                      *
//*2. SMFSTEPT WRITES A FILE CONTAINING JOB NAME, STEP NAME, PROGRAM*
//*   NAME, READER START DATE/TIME, TCB CPU TIME, SRB CPU TIME,     *
//*   SMF SYSTEM ID, AND TOTAL EXCPS.                               *
//*   ONE RECORD IS WRITTEN FOR EACH SMF TYPE 30, SUBTYPE 3 RECORD. *
//*   THESE ARE THE STEP TERMINATION RECORDS.                       *
//*3. SMFSTEPT RECORDS ARE SORTED IN ASCENDING PROGRAM NAME ORDER.  *
//*4. SMFSTEP2 WRITES ONE RECORD FOR EACH PROGRAM CONTAINING THE    *
//*   JOB NAME, TOTAL TASK CPU TIME USED BY THE JOB, NUMBER RUNS    *
//*   AND AVERAGE CPU TIME PER RUN,                                 *
//*5. SMFSTEP2 RECORDS ARE SORTED DESCENDING ON TOTAL TASK CPU TIME.*
//*6. SMFSTEP3 PRINTS THE HEAVY HITTER LIST.                        *
//*******************************************************************
//*
//SCRATCH1 EXEC PGM=IDCAMS
//SYSPRINT DD SYSOUT=*
//SYSIN    DD *
 DELETE BC0THOR.SMFSTEPT.UNSORT NONVSAM
 DELETE BC0THOR.SMFSTEPT.SORT NONVSAM
 DELETE BC0THOR.SMFSTEP2.UNSORT NONVSAM
 DELETE BC0THOR.SMFSTEP2.SORT NONVSAM
 DELETE BC0THOR.SMFSTEP3.SORT NONVSAM
//*
//SMFSTEPT EXEC PGM=SMFSTEPT
//STEPLIB  DD   DSN=BC0THOR.LOAD.LOAD,DISP=SHR
//SYSUDUMP DD   SYSOUT=*
//OUTPUT1  DD   DSN=BC0THOR.SMFSTEPT.UNSORT,DISP=(,CATLG),
//         UNIT=DISK,SPACE=(TRK,(30,15),RLSE),
//         RECFM=FB,LRECL=80,BLKSIZE=0
//*NPUT1   DD   DSN=SMF.DKI0002.RAWDATA,DISP=SHR          *SYSB*
//*NPUT1   DD   DSN=SMF.DKI0002A.RAWBKUP(0),DISP=SHR
//*NPUT1   DD   DSN=SMF.DKI0015.SMFACCUM(0),DISP=SHR
//*NPUT1   DD   DSN=SMF.MKI0015.SMFACCUM(0),DISP=SHR
//INPUT1   DD   DSN=SMF.DKI9002.RAWDATA,DISP=SHR          *SYSA*
//*NPUT1   DD   DSN=SMF.DKI9002A.RAWBKUP(0),DISP=SHR
//*NPUT1   DD   DSN=SMF.DKI9015.SMFACCUM(0),DISP=SHR
//*NPUT1   DD   DSN=SMF.MKI9015.SMFACCUM(0),DISP=SHR
//*
//SORT     EXEC PGM=SORT33,PARM='CORE=MAX,MSG=AP'
//SYSUDUMP DD   SYSOUT=(*,,DUMP)
//SORTIN   DD   DSN=BC0THOR.SMFSTEPT.UNSORT,DISP=(OLD,DELETE,KEEP)
//SORTOUT  DD   DSN=BC0THOR.SMFSTEPT.SORT,DISP=(,CATLG),
//         UNIT=DISK,SPACE=(TRK,(15,5),RLSE),
//         RECFM=FB,LRECL=80,BLKSIZE=0
//SORTWK01 DD   UNIT=DISK,SPACE=(CYL,(5,5))
//SORTWK02 DD   UNIT=DISK,SPACE=(CYL,(5,5))
//SORTWK03 DD   UNIT=DISK,SPACE=(CYL,(5,5))
//SORTWK04 DD   UNIT=DISK,SPACE=(CYL,(5,5))
//SORTWK05 DD   UNIT=DISK,SPACE=(CYL,(5,5))
//SORTWK06 DD   UNIT=DISK,SPACE=(CYL,(5,5))
//SYSOUT   DD   SYSOUT=*
//SYSIN    DD   *
 SORT FIELDS=(21,8,CH,A)
//*
//SMFSTEP2 EXEC PGM=SMFSTEP2
//STEPLIB  DD   DSN=BC0THOR.LOAD.LOAD,DISP=SHR
//SYSUDUMP DD   SYSOUT=*
//OUTPUT1  DD   DSN=BC0THOR.SMFSTEP2.UNSORT,DISP=(,CATLG),
//         UNIT=DISK,SPACE=(TRK,(30,15),RLSE),
//         RECFM=FB,LRECL=80,BLKSIZE=0
//INPUT1   DD   DSN=BC0THOR.SMFSTEPT.SORT,DISP=SHR
//*
//SORT2    EXEC PGM=SORT33,PARM='CORE=MAX,MSG=AP'
//SYSUDUMP DD   SYSOUT=(*,,DUMP)
//SORTIN   DD   DSN=BC0THOR.SMFSTEP2.UNSORT,DISP=SHR
//SORTOUT  DD   DSN=BC0THOR.SMFSTEP2.SORT,DISP=(,CATLG),
//         UNIT=DISK,SPACE=(TRK,(15,5),RLSE),
//         RECFM=FB,LRECL=80,BLKSIZE=0
//SORTWK01 DD   UNIT=DISK,SPACE=(CYL,(5,5))
//SORTWK02 DD   UNIT=DISK,SPACE=(CYL,(5,5))
//SORTWK03 DD   UNIT=DISK,SPACE=(CYL,(5,5))
//SORTWK04 DD   UNIT=DISK,SPACE=(CYL,(5,5))
//SORTWK05 DD   UNIT=DISK,SPACE=(CYL,(5,5))
//SORTWK06 DD   UNIT=DISK,SPACE=(CYL,(5,5))
//SYSOUT   DD   SYSOUT=*
//SYSIN    DD   *
 SORT FIELDS=(10,25,CH,D)
//*
//SMFSTEP3 EXEC PGM=SMFSTEP3
//STEPLIB  DD   DSN=BC0THOR.LOAD.LOAD,DISP=SHR
//SYSUDUMP DD   SYSOUT=*
//INPUT1   DD   DSN=BC0THOR.SMFSTEP2.SORT,DISP=SHR
//INPUT2   DD   DSN=BC0THOR.PDS.DATA(SMFSTEP3),DISP=SHR
//PRINT1   DD   SYSOUT=*
//OUTPUT1  DD   DSN=BC0THOR.SMFSTEP3.UNSORT,DISP=(,CATLG),
//         UNIT=DISK,SPACE=(TRK,(30,15),RLSE),
//         RECFM=FB,LRECL=80,BLKSIZE=0
//*
//SORT3    EXEC PGM=SORT33,PARM='CORE=MAX,MSG=AP'
//SYSUDUMP DD   SYSOUT=(*,,DUMP)
//SORTIN   DD   DSN=BC0THOR.SMFSTEP3.UNSORT,DISP=SHR
//SORTOUT  DD   DSN=BC0THOR.SMFSTEP3.SORT,DISP=(,CATLG),
//         UNIT=DISK,SPACE=(TRK,(15,5),RLSE),
//         RECFM=FB,LRECL=80,BLKSIZE=0
//SORTWK01 DD   UNIT=DISK,SPACE=(CYL,(5,5))
//SORTWK02 DD   UNIT=DISK,SPACE=(CYL,(5,5))
//SORTWK03 DD   UNIT=DISK,SPACE=(CYL,(5,5))
//SORTWK04 DD   UNIT=DISK,SPACE=(CYL,(5,5))
//SORTWK05 DD   UNIT=DISK,SPACE=(CYL,(5,5))
//SORTWK06 DD   UNIT=DISK,SPACE=(CYL,(5,5))
//SYSOUT   DD   SYSOUT=*
//SYSIN    DD   *
 SORT FIELDS=(1,8,CH,A)
//*
//SMFSTEP4 EXEC PGM=SMFSTEP4
//STEPLIB  DD   DSN=BC0THOR.LOAD.LOAD,DISP=SHR
//SYSUDUMP DD   SYSOUT=*
//INPUT1   DD   DSN=BC0THOR.SMFSTEP3.SORT,DISP=SHR
//INPUT2   DD   DSN=BC0THOR.SMFSTEPT.SORT,DISP=SHR
//PRINT1   DD   SYSOUT=*
